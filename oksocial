#!/bin/sh

if [ ! -f target/okhttp-social-*-SNAPSHOT-jar-with-dependencies.jar ]; then
  mvn package
fi

JAVA_CMD=java
BCP=
#DEBUG=-agentlib:jdwp=transport=dt_socket,server=n,address=192.168.0.26:5005,suspend=y

if [ -x /usr/libexec/java_home ]; then
  JAVA_HOME=$(/usr/libexec/java_home -v 1.8)

  if [ $? -eq 0 ]; then
    JAVA_CMD="$JAVA_HOME/bin/java"
    BCP="-Xbootclasspath/p:$HOME/.m2/repository/org/mortbay/jetty/alpn/alpn-boot/8.1.2.v20141202/alpn-boot-8.1.2.v20141202.jar"
  fi
fi

$JAVA_CMD $DEBUG $BCP -jar target/okhttp-social-*-SNAPSHOT-jar-with-dependencies.jar "$@"

